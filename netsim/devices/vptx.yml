description: Juniper vPTX
interface_name: et-0/0/{ifindex}
loopback_interface_name: "lo0.{ifindex}"
ifindex_offset: 0
mgmt_if: "re0:mgmt-0"
group_vars:
  ansible_user: vagrant
  ansible_ssh_pass: Vagrant
  ansible_network_os: junos
  ansible_connection: netconf
  netlab_console_connection: ssh
  netlab_device_type: vptx
features:
  initial:
    ipv4:
      unnumbered: True
    ipv6:
      lla: True
  ospf:
    unnumbered: True
  isis:
    unnumbered:
      ipv4: True
      ipv6: True
  vlan:
    model: l3-switch
    svi_interface_name: irb.{vlan}
    subif_name: "{ifname}.{vlan.access_id}"
    mixed_trunk: True
    native_routed: True
  mpls:
    ldp: True
    vpn: True
external:
  image: none
graphite.icon: switch
libvirt:
  image: juniper/vptx
  # New "pre-install hooks" to be created... in a similar way to the ISO building method.
  pre_install: vptx
  create:
    virt-install --connect=qemu:///system --name=vm_box --arch=x86_64 --cpu host --vcpus=4 --hvm --ram=8192 --disk path=vm.qcow2,bus=virtio,format=qcow2 --disk path=bootstrap.iso,bus=virtio,format=iso --boot hd --network=network:vagrant-libvirt,model=virtio --graphics none --import --qemu-commandline="-machine type=pc,accel=kvm -smbios type=1,product=VM-VEX"
