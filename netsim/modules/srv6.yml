# SRv6 over IS-IS (optionally using BGP and/or BGP L3VPN v4/v6) default settings and attributes
#
# Modeled similar to the MPLS module
#
config_after: [ vlan, isis, ospf, bgp ]
transform_after: [ vlan, bgp, vrf ]
no_propagate: [ locator_pool ]

locator_pool: 2001:db8::/40 # Default address pool for locators, see RFC 6890 – Documentation Set
igp: [ isis ]               # By default, enable SRv6 over IS-IS
af:
  ipv4: True
  ipv6: True
bgp: True                   # Enable SRv6 for BGP when available

attributes:
  global:
    af:
      _list_to_dict: True
      _alt_types: [ NoneType ]
      ipv4: bool
      ipv6: bool
    bgp: bool
    igp: { type: list, valid_values: [ isis, ospf ] }
    vpn: # BGP VPN v4/v6
      _alt_types: [ bool, BoxList ]
      ipv4: { type: list, true_value: [ ibgp ] }
      ipv6: { type: list, true_value: [ ibgp ] }
    locator_pool: { type: ipv6, use: subnet_prefix }

  node:
    af:
    bgp:
    igp:
    locator: { type: ipv6, use: subnet_prefix }
    vpn:
    transit_only: bool

#
# XXX this gets added to all topologies, even when srv6 module is not used
#
# _top:
#   addressing:
#     srv6_locator:
#       ipv6: 2001:db8::/40  # Default address pool to allocate SRv6 locators from, see RFC 6890 – Documentation Set
#       prefix6: 48

features:
  bgp: Supports BGP v4/v6 over SRv6
  vpn: Supports BGP L3VPN v4/v6 over SRv6
  isis: Supports SRv6 over IS-IS
  ospf: Supports SRv6 over OSPFv3
