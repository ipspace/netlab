# STP default settings and attributes
#
---
requires: [ vlan ]  # Perhaps not on all platforms
transform_after: [ vlan ]
config_after: [ vlan ]
no_propagate: [ pvrst ]

enable: True        # By default, enable STP everywhere (on all bridges created by Netlab) when this module is used

attributes:
  global:
    enable: bool
    pvrst: bool      # Topology requires Per-VLAN Rapid Spanning Tree (802.1w)
  node:
    enable: bool
    priority: { type: int, min_value: 0, max_value: 61440 }    # Increments of 4096, default 32768, lower value = higher priority
  interface:
    enable: bool
    port_priority: { type: int, min_value: 0, max_value: 255 } # Used in determining root/designated ports, some platforms use lower max
  link:
    enable: bool

_top:               # Modification of global defaults
  attributes:
    node_vlan:
      stp.priority: { type: int, min_value: 0, max_value: 61440 }  # Per-VLAN STP priority for this node

features:
  mstp: Multiple Spanning Tree Protocol  # On Linux, STP + VLAN-aware bridge is interoperable with MSTP
