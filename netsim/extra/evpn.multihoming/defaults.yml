# evpn.multihoming: Support EVPN Multihoming (Ethernet Segments)
#
---
devices:
  vjunos-switch:
    features.evpn.multihoming:
      # support ES definition on LAG interfaces (ESI-LAG)
      lag: true
      # support ES definition on "standard" ethernet interfaces
      interface: true
      # ESI Auto value based on LACP System ID
      esi_auto: true
      modes: [ 'all-active' ] # not used yet
  eos:
    features.evpn.multihoming:
      lag: true
      interface: true
      esi_auto: true
      modes: [ 'all-active' ] # not used yet
  cumulus_nvue:
    features.evpn.multihoming:
      lag: true
      interface: false
      esi_auto: false
      modes: [ 'all-active' ] # not used yet
  # for validation
  none:
    features.evpn.multihoming:
      # support ES definition on LAG interfaces (ESI-LAG)
      lag: true
      # support ES definition on "standard" ethernet interfaces
      interface: true
      # ESI Auto value based on LACP System ID
      esi_auto: true
      modes: [ 'all-active' ] # not used yet


# data model:
# -- global: evpn.ethernet_segments
# -- on interface: es: xxx (must be a valid ethernet_segment reference)
evpn:
  attributes:
    global:
      ethernet_segments:
        type: dict
        _keytype: id
        _subtype: _es_item
    node:
      ethernet_segments: { copy: global }
    interface:
      es: id
    # specific attributes
    _es_item:
      auto: bool
      id: esi_value
