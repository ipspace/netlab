#
# Network Unit Testing System (NUTS) tool
#
runtime: docker     # Default: start in a Docker container
docker:
  up:
    docker run --rm -itd --name '{name}_nuts'
      {sys.docker_net}
      -v './nuts':/nuts
      -w /nuts
      ghcr.io/network-unit-testing-system/nuts
  message:
    Use 'netlab connect nuts' to connect to the NUTS container. Run 'pytest' in the container to execute tests.
  connect:
    docker exec -it '{name}_nuts' bash
  down:
    docker kill '{name}_nuts'
  cleanup:
    docker volume rm '{name}_nuts'
config:
- dest: nr-config.yaml
  template: nr-config.yaml
- dest: inventory/groups.yaml
  template: inventory/groups.yaml
- dest: inventory/hosts.yaml
  template: inventory/hosts.j2
- dest: tests/test_interfaces.yaml
  template: tests/test_interfaces.j2
- dest: tests/test_ospf.yaml
  template: tests/test_ospf.j2
- dest: tests/test_bgp.yaml
  template: tests/test_bgp.j2
