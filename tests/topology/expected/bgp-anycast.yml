bgp:
  advertise_loopback: true
  as: 65000
  community:
    ebgp:
    - standard
    ibgp:
    - standard
    - extended
  next_hop_self: true
input:
- topology/input/bgp-anycast.yml
- package:topology-defaults.yml
links:
- l1:
    ipv4: 10.1.0.1/30
  l2:
    ipv4: 10.1.0.2/30
  left:
    ifname: GigabitEthernet0/1
    ipv4: 10.1.0.1/30
    node: l1
  linkindex: 1
  name: l1 - l2
  prefix:
    ipv4: 10.1.0.0/30
  right:
    ifname: GigabitEthernet0/1
    ipv4: 10.1.0.2/30
    node: l2
  type: p2p
module:
- ospf
- bgp
name: input
nodes:
- bgp:
    advertise_loopback: true
    as: 65000
    community:
      ebgp:
      - standard
      ibgp:
      - standard
      - extended
    ipv4: true
    neighbors:
    - as: 65000
      ipv4: 10.0.0.2
      name: l2
      type: ibgp
    next_hop_self: true
  box: cisco/iosv
  device: iosv
  id: 1
  links:
  - ifindex: 1
    ifname: GigabitEthernet0/1
    ipv4: 10.1.0.1/30
    linkindex: 1
    name: l1 -> l2
    neighbors:
      l2:
        ifname: GigabitEthernet0/1
        ipv4: 10.1.0.2/30
    remote_id: 2
    remote_ifindex: 1
    type: p2p
  loopback:
    ipv4: 10.0.0.1/32
  mgmt:
    ifname: GigabitEthernet0/0
    ipv4: 192.168.121.101
    mac: 08-4F-A9-00-00-01
  module:
  - ospf
  - bgp
  name: l1
- bgp:
    advertise_loopback: true
    anycast: 10.42.42.42/32
    as: 65000
    community:
      ebgp:
      - standard
      ibgp:
      - standard
      - extended
    ipv4: true
    neighbors:
    - as: 65000
      ipv4: 10.0.0.1
      name: l1
      type: ibgp
    next_hop_self: true
  box: cisco/iosv
  device: iosv
  id: 2
  links:
  - ifindex: 1
    ifname: GigabitEthernet0/1
    ipv4: 10.1.0.2/30
    linkindex: 1
    name: l2 -> l1
    neighbors:
      l1:
        ifname: GigabitEthernet0/1
        ipv4: 10.1.0.1/30
    remote_id: 1
    remote_ifindex: 1
    type: p2p
  loopback:
    ipv4: 10.0.0.2/32
  mgmt:
    ifname: GigabitEthernet0/0
    ipv4: 192.168.121.102
    mac: 08-4F-A9-00-00-02
  module:
  - ospf
  - bgp
  name: l2
provider: libvirt
