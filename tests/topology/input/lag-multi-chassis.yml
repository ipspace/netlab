#
# Basic MC-LAG example
#

defaults:
 provider: clab
 device: sros

lag:
 lacp: fast              # Standby detection through link down does not work in virtual systems
 lacp_xmit_stdby: False  # Interop with FRR - when sending LACP, standby is not detected

module: [ lag,isis ]     # Need an IGP to distribute loopbacks for MC-LAG
nodes: 
 r1:
  device: frr
 r2:
 r3:
links:
- r2-r3
- r1:
  r2:
   lag.peer: r3
  lag.id: 1
- r1:
  r3:
   lag.peer: r2
  lag.id: 1