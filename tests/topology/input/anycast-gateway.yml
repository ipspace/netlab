#
# Anycast gateway test case
#

gateway.id: 1

groups:
  switches:
    module: [ gateway,vlan,ospf ]
    members: [ r1, r2 ]
    device: eos
  hosts:
    members: [ h1, h2, h3, h4 ]
    device: linux

nodes:
  r1:
  r2:
  h1:
  h2:
  h3:
  h4:
    id: 13

vlans:
  red:                        # Test anycast in a VLAN
    gateway: True             # ... also verify that the VLAN data is not overwriting gateway data on SVI interface

links:
- r1:
  r2:
  h1:
  h2:
  gateway.anycast.unicast: False      # Test removal of unicast IP addresses
  gateway.id: -2                      # And a negative offset
- r1:
  h3:
  vlan.access: red
- r2:
  h4:
  vlan.access: red
- r2:
  h4:
  prefix:
    ipv4: "10.42.42.0/28"
  gateway.id: -3
