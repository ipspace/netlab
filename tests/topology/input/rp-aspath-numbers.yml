# Test the "import and number aspaths"
#

addressing.loopback.ipv6: 2001:db8:cafe::/48
defaults.device: none

module: [ bgp, routing ]
plugin: [ bgp.policy ]

routing:
  aspath:
    p1: 65000                                 # AS-path ACL as int => single-entry ACL
    p2: [ 65000 ]                             # Single-entry AS-path ACL
    p3:                                       # AS-path ACL
    - action: deny
      path: [ 65000, 65001 ]                  # first entry is a list of ASNs
    - '6510.'                                 # the second entry is a regexp
  policy:
    p1:
      match.aspath: p1

nodes:
  r1:
    bgp.as: 65000
  r2:
    bgp.as: 65001
    routing:
      aspath:
        p4: '65000 .*'
      policy:
        px:
        - match.aspath: p1
          set.locpref: 100
        - match.aspath: p4
          set.locpref: 200

links:
- r1:
    bgp.policy.in: p1
  r2:
    bgp.policy.in: px
