#
# Advanced dual LAG MLAG example - 2x2 links between hosts and MLAG pair
#

provider: clab

module: [ lag, vlan ]

vlans:
 red:

groups:
 _auto_create: True
 switches:
  members: [s1,s2]
  device: dellos10
 hosts:
  members: [h1,h2]
  device: frr

links:
- lag: # MLAG peer link between S1 and S2
   members: [s1-s2]
   mlag.peergroup: 1
- lag:
   members: [ h1-s1,h1-s1,h1-s2,h1-s2 ]
   mlag: True
   ifindex: 1 # Should be auto-generated
  vlan.access: red
- lag:
   members: [ h2-s1,h2-s1,h2-s2,h2-s2 ]
   mlag: True
   ifindex: 2 # Should be auto-generated
  vlan.access: red