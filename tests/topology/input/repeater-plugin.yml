---
plugin: [ repeater ]

module: [lag,vlan]

vlans:
 red:
  links: [r-h]  # VLAN links get updated

groups:
 hosts:
  members: [h]  # Gets updated with cloned nodes

nodes:
 r:
  device: frr

 h:
  device: frr
  repeat: 3     # Create 3 copies -> 4 hosts total
  id: 10        # Starting at ID 10

links:
- r-h           # Plugin supports different styles of specifying links, all normalized
- r:
    ifindex: 20 # Custom port on router -> gets incremented
  h:
    mtu: 1600   # Interface atts get copied too

- lag.members: [ r-h, r-h ] # TODO lags need special work, not supported yet -> plugin issues a warning and doesn't modify them