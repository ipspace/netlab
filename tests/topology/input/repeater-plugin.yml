---
plugin: [ repeater ]

module: [lag,vlan]

vlans:
 red:
  links: [r-host_w_long_name]  # VLAN links get updated

groups:
 _auto_create: True # Test presence of bool flag
 hosts:
  members: [host_w_long_name]  # Gets updated with cloned nodes

nodes:
 r:
  device: frr

 host_w_long_name:  # Test that node names get shortened to at most 16 chars
  device: frr
  repeat: 3            # Create 3 copies -> 4 hosts total
  id: 10               # Starting at ID 10

links:
- r-host_w_long_name    # Plugin supports different styles of specifying links, all normalized
- r:
    ifindex: 20 # Custom port on router -> gets incremented
  host_w_long_name:
    mtu: 1600   # Interface atts get copied too

- lag.members: [ r-host_w_long_name, r-host_w_long_name ] # TODO lags need special work, not supported yet -> plugin issues a warning and doesn't modify them