---
plugin: [ bgp.confederation ]
module: [ bgp ]

bgp.confederation:
  65000:
    members: [ 65001, 65002 ]

groups:
  _auto_create: True

  confed:
    members: [ dut, c2, c3 ]

  ext:
    members: [ e1 ]
    device: frr
    provider: clab

nodes:
  dut:
    bgp.as: 65001
    module: [ bgp, ospf ]
  c2:
    bgp.as: 65002
    device: frr
    provider: clab
  c3:
    bgp.as: 65001 # Same as DUT
    device: frr
    provider: clab
    module: [ bgp, ospf ]
  e1:
    bgp.as: 65003

links:
- dut-c2
- dut-e1
- c2-e1
- dut-c3 # iBGP within same confederation
