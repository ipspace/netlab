---
plugin: [ bgp.confederation ]
module: [ bgp ]

bgp.confederation:
  65000:
    members: [ 65001, 65002 ]

groups:
  _auto_create: True

  confed:
    members: [ c1, c2, c3 ]

  ext:
    members: [ e1 ]
    device: frr
    provider: clab

nodes:
  c1:
    bgp.as: 65001
  c2:
    bgp.as: 65002
    device: frr
    provider: clab
  c3:
    bgp.as: 65002 # Same as C2
    device: frr
    provider: clab
  e1:
    bgp.as: 65003

links:
- c1-c2
- c1-e1
- c2-e1
- c2-c3 # iBGP within same confederation
