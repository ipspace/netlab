[adj_a]       Check OSPF adjacencies with DUT_A [ node(s): probe ]
[WAITING]     Waiting for OSPF adjacency process to complete (retrying for 30 seconds)
[PASS]        probe: Neighbor 10.0.0.1 is in state Full/-
[PASS]        Succeeded in 8.9 seconds
[PASS]        Test succeeded

[adj_c]       Check OSPF adjacencies with DUT_C [ node(s): probe ]
[PASS]        probe: Neighbor 10.0.0.2 is in state Full/-
[PASS]        Test succeeded

[adj_x]       Check EBGP sessions with DUT_C [ node(s): xf ]
[PASS]        xf: Neighbor 172.16.2.2 (dut_c) is in state Established
[PASS]        Test succeeded

[df]          Do we have at least some default route? [ node(s): probe ]
[WAITING]     Wait for SPF to complete (retrying for 10 seconds)
[PASS]        probe: The prefix 0.0.0.0/0 is in the OSPF topology
[PASS]        Succeeded in 1.2 seconds
[PASS]        Test succeeded

[df_a]        Check for the always-present default route [ node(s): probe ]
[PASS]        probe: The prefix 0.0.0.0/0 is in the OSPF topology with cost=40,route type=N E2
[PASS]        Test succeeded

[p_eth1_down] Shut down the link to DUT_A [ node(s): probe ]

[bgp_dr]      Enable BGP default route [ node(s): xf ]
[INFO]        Executing configuration snippet bgp_default
[PASS]        BGP default route is sent to BGP neighbors

[df_c]        Check for the conditional default route [ node(s): probe ]
[PASS]        probe: The prefix 0.0.0.0/0 is in the OSPF topology with cost=30
[PASS]        Test succeeded

[bgp_ndr]     Disable BGP default route [ node(s): xf ]
[INFO]        Executing configuration snippet bgp_default
[PASS]        BGP default route is no longer sent to BGP neighbors

[p_eth1_up]   Enable the link to DUT_A [ node(s): probe ]

[SUCCESS]     Tests passed: 8
